{"version":3,"sources":["../../../lib/src/katex-options.ts","../../../lib/src/language.pipe.ts","../../../node_modules/tslib/tslib.es6.js","../../../lib/src/prism-plugin.ts","../../../lib/src/marked-options.ts","../../../lib/src/markdown.service.ts","../../../lib/src/markdown.component.ts","../../../lib/src/markdown.pipe.ts","../../../lib/src/markdown.module.ts"],"names":["LanguagePipe","prototype","transform","value","language","console","error","Pipe","args","name","Object","create","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","__spread","arguments","length","concat","PrismPlugin","errorJoyPixelsNotLoaded","errorKatexNotLoaded","errorSrcWithoutHttpClient","SECURITY_CONTEXT","InjectionToken","MarkdownService","platform","securityContext","http","options","sanitizer","this","initialMarkedOptions","renderer","MarkedRenderer","defineProperty","_options","assign","compile","markdown","decodeHtml","emojify","markedOptions","trimmed","trimIndentation","decoded","emojified","renderEmoji","compiled","marked.parse","sanitize","getSource","src","_this","Error","get","responseType","pipe","map","handleExtension","highlight","element","isPlatformBrowser","Prism","document","noLanguageElements","querySelectorAll","Array","forEach","x","classList","add","highlightAllUnder","renderKatex","html","katex","renderToString","replace","_","tex","textarea","createElement","innerHTML","extension","split","splice","join","joypixels","shortnameToUnicode","line","lineIdentStart","indentStart","isNaN","search","Math","min","substring","Injectable","decorators","type","Inject","PLATFORM_ID","SecurityContext","HttpClient","Optional","MarkedOptions","DomSanitizer","MarkdownComponent","markdownService","EventEmitter","load","ready","_emoji","_katex","_lineHighlight","_lineNumbers","coerceBooleanProperty","ngOnChanges","data","handleSrc","handleData","ngAfterViewInit","handleTransclusion","render","emoji","katexOptions","nativeElement","handlePlugins","emit","subscribe","lineHighlight","setPluginClass","LineHighlight","setPluginOptions","dataLine","dataLineOffset","lineOffset","lineNumbers","LineNumbers","dataStart","start","plugin","preElements","classes","_a","item","apply","keys","option","attributeValue","attributeName","toLispCase","setAttribute","toString","upperChars","match","str","RegExp","toLowerCase","slice","Component","selector","template","ElementRef","Input","Output","MarkdownPipe","elementRef","zone","onStable","first","NgZone","sharedDeclarations","MarkdownModule","forRoot","markdownModuleConfig","ngModule","providers","loader","provide","useValue","HTML","forChild","NgModule","exports","declarations"],"mappings":"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","sourcesContent":["// tslint:disable: no-redundant-jsdoc\r\nexport class KatexOptions {\r\n    /**\r\n     * If `true`, math will be rendered in display mode\r\n     * (math in display style and center math on page)\r\n     *\r\n     * If `false`, math will be rendered in inline mode\r\n     * @default false\r\n     */\r\n    displayMode?: boolean;\r\n    /**\r\n     * If `true`, KaTeX will throw a `ParseError` when\r\n     * it encounters an unsupported command or invalid LaTex\r\n     *\r\n     * If `false`, KaTeX will render unsupported commands as\r\n     * text, and render invalid LaTeX as its source code with\r\n     * hover text giving the error, in color given by errorColor\r\n     * @default true\r\n     */\r\n    throwOnError?: boolean;\r\n    /**\r\n     * A Color string given in format `#XXX` or `#XXXXXX`\r\n     */\r\n    errorColor?: string;\r\n    /**\r\n     * A collection of custom macros.\r\n     *\r\n     * See `src/macros.js` for its usage\r\n     */\r\n    macros?: any;\r\n    /**\r\n     * If `true`, `\\color` will work like LaTeX's `\\textcolor`\r\n     * and takes 2 arguments\r\n     *\r\n     * If `false`, `\\color` will work like LaTeX's `\\color`\r\n     * and takes 1 argument\r\n     *\r\n     * In both cases, `\\textcolor` works as in LaTeX\r\n     *\r\n     * @default false\r\n     */\r\n    colorIsTextColor?: boolean;\r\n    /**\r\n     * All user-specified sizes will be caped to `maxSize` ems\r\n     *\r\n     * If set to Infinity, users can make elements and space\r\n     * arbitrarily large\r\n     *\r\n     * @default Infinity\r\n     */\r\n    maxSize?: number;\r\n    /**\r\n     * Limit the number of macro expansions to specified number\r\n     *\r\n     * If set to `Infinity`, marco expander will try to fully expand\r\n     * as in LaTex\r\n     *\r\n     * @default 1000\r\n     */\r\n    maxExpand?: number;\r\n    /**\r\n     * Allowed protocols in `\\href`\r\n     *\r\n     * Use `_relative` to allow relative urls\r\n     *\r\n     * Use `*` to allow all protocols\r\n     */\r\n    allowedProtocols?: string[];\r\n    /**\r\n     * If `false` or `\"ignore\"`, allow features that make\r\n     * writing in LaTex convenient but not supported by LaTex\r\n     *\r\n     * If `true` or `\"error\"`, throw an error for such transgressions\r\n     *\r\n     * If `\"warn\"`, warn about behavior via `console.warn`\r\n     *\r\n     * @default \"warn\"\r\n     */\r\n    strict?: boolean | string | Function;\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'language',\r\n})\r\nexport class LanguagePipe implements PipeTransform {\r\n\r\n  transform(value: string, language: string): string {\r\n    if (typeof value !== 'string') {\r\n      console.error(`LanguagePipe has been invoked with an invalid value type [${value}]`);\r\n      return value;\r\n    }\r\n    if (typeof language !== 'string') {\r\n      console.error(`LanguagePipe has been invoked with an invalid parameter [${language}]`);\r\n      return value;\r\n    }\r\n    return '```' + language + '\\n' +  value + '\\n```';\r\n  }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export enum PrismPlugin {\r\n  LineHighlight = 'line-highlight',\r\n  LineNumbers = 'line-numbers',\r\n}\r\n","import { MarkedRenderer } from './marked-renderer';\r\n\r\nexport class MarkedOptions {\r\n  /**\r\n   * A prefix URL for any relative link.\r\n   */\r\n  baseUrl?: string;\r\n\r\n  /**\r\n   * Enable GFM line breaks. This option requires the gfm option to be true.\r\n   */\r\n  breaks?: boolean;\r\n\r\n  /**\r\n   * Enable GitHub flavored markdown.\r\n   */\r\n  gfm?: boolean;\r\n\r\n  /**\r\n   * Include an id attribute when emitting headings.\r\n   */\r\n  headerIds?: boolean;\r\n\r\n  /**\r\n   * Set the prefix for header tag ids.\r\n   */\r\n  headerPrefix?: string;\r\n\r\n  /**\r\n   * Set the prefix for code block classes.\r\n   */\r\n  langPrefix?: string;\r\n\r\n  /**\r\n   * Mangle autolinks (<email@domain.com>).\r\n   */\r\n  mangle?: boolean;\r\n\r\n  /**\r\n   * Conform to obscure parts of markdown.pl as much as possible. Don't fix any of the original markdown bugs or poor behavior.\r\n   */\r\n  pedantic?: boolean;\r\n\r\n  /**\r\n   * Type: object Default: new Renderer()\r\n   *\r\n   * An object containing functions to render tokens to HTML.\r\n   */\r\n  renderer?: MarkedRenderer;\r\n\r\n  /**\r\n   * Shows an HTML error message when rendering fails.\r\n   */\r\n  silent?: boolean;\r\n\r\n  /**\r\n   * Use smarter list behavior than the original markdown. May eventually be default with the old behavior moved into pedantic.\r\n   */\r\n  smartLists?: boolean;\r\n\r\n  /**\r\n   * Use \"smart\" typograhic punctuation for things like quotes and dashes.\r\n   */\r\n  smartypants?: boolean;\r\n\r\n  /**\r\n   * Generate closing slash for self-closing tags (<br/> instead of <br>)\r\n   */\r\n  xhtml?: boolean;\r\n\r\n  /**\r\n   * A function to highlight code blocks. The function takes three arguments: code, lang, and callback.\r\n   */\r\n  highlight?(code: string, lang: string, callback?: (error: any | undefined, code: string) => void): string;\r\n}\r\n","import { isPlatformBrowser } from '@angular/common';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Inject, Injectable, InjectionToken, Optional, PLATFORM_ID, SecurityContext } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport * as marked from 'marked';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { KatexOptions } from './katex-options';\r\nimport { MarkedOptions } from './marked-options';\r\nimport { MarkedRenderer } from './marked-renderer';\r\n\r\ndeclare var joypixels: {\r\n  shortnameToUnicode(input: string): string;\r\n};\r\n\r\ndeclare var katex: {\r\n  renderToString(tex: string, options?: KatexOptions): string;\r\n};\r\n\r\ndeclare var Prism: {\r\n  highlightAllUnder: (element: Element | Document) => void;\r\n};\r\n\r\n// tslint:disable:max-line-length\r\nexport const errorJoyPixelsNotLoaded = '[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information';\r\nexport const errorKatexNotLoaded = '[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information';\r\nexport const errorSrcWithoutHttpClient = '[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information';\r\n// tslint:enable:max-line-length\r\n\r\nexport const SECURITY_CONTEXT = new InjectionToken<SecurityContext>('SECURITY_CONTEXT');\r\n\r\n@Injectable()\r\nexport class MarkdownService {\r\n\r\n  private readonly initialMarkedOptions: MarkedOptions = {\r\n    renderer: new MarkedRenderer(),\r\n  };\r\n\r\n  private _options: MarkedOptions | undefined;\r\n\r\n  get options(): MarkedOptions { return this._options!; }\r\n  set options(value: MarkedOptions) {\r\n    this._options = { ...this.initialMarkedOptions, ...value };\r\n  }\r\n\r\n  get renderer(): MarkedRenderer { return this.options.renderer!; }\r\n  set renderer(value: MarkedRenderer) {\r\n    this.options.renderer = value;\r\n  }\r\n\r\n  constructor(\r\n    @Inject(PLATFORM_ID) private platform: Object,\r\n    @Inject(SECURITY_CONTEXT) private securityContext: SecurityContext,\r\n    @Optional() private http: HttpClient,\r\n    @Optional() options: MarkedOptions,\r\n    private sanitizer: DomSanitizer,\r\n  ) {\r\n    this.options = options;\r\n  }\r\n\r\n  compile(markdown: string, decodeHtml = false, emojify = false,  markedOptions = this.options): string {\r\n    const trimmed = this.trimIndentation(markdown);\r\n    const decoded = decodeHtml ? this.decodeHtml(trimmed) : trimmed;\r\n    const emojified = emojify ? this.renderEmoji(decoded) : decoded;\r\n    const compiled = marked.parse(emojified, markedOptions);\r\n    return this.sanitizer.sanitize(this.securityContext, compiled) || '';\r\n  }\r\n\r\n  getSource(src: string): Observable<string> {\r\n    if (!this.http) {\r\n      throw new Error(errorSrcWithoutHttpClient);\r\n    }\r\n    return this.http\r\n      .get(src, { responseType: 'text' })\r\n      .pipe(map(markdown => this.handleExtension(src, markdown)));\r\n  }\r\n\r\n  highlight(element?: Element | Document): void {\r\n    if (isPlatformBrowser(this.platform) && typeof Prism !== 'undefined') {\r\n      if (!element) {\r\n        element = document;\r\n      }\r\n      const noLanguageElements = element.querySelectorAll('pre code:not([class*=\"language-\"])');\r\n      Array.prototype.forEach.call(noLanguageElements, (x: Element) => x.classList.add('language-none'));\r\n      Prism.highlightAllUnder(element);\r\n    }\r\n  }\r\n\r\n  renderKatex(html: string, options?: KatexOptions): string {\r\n    if (typeof katex === 'undefined' || typeof katex.renderToString === 'undefined') {\r\n      throw new Error(errorKatexNotLoaded);\r\n    }\r\n    return html.replace(/\\$([^\\s][^$]*?[^\\s])\\$/gm, (_, tex) => katex.renderToString(tex, options));\r\n  }\r\n\r\n  private decodeHtml(html: string): string {\r\n    if (isPlatformBrowser(this.platform)) {\r\n      const textarea = document.createElement('textarea');\r\n      textarea.innerHTML = html;\r\n      return textarea.value;\r\n    }\r\n    return html;\r\n  }\r\n\r\n  private handleExtension(src: string, markdown: string): string {\r\n    const extension = src\r\n      ? src.split('?')[0].split('.').splice(-1).join()\r\n      : null;\r\n    return extension !== 'md'\r\n      ? '```' + extension + '\\n' + markdown + '\\n```'\r\n      : markdown;\r\n  }\r\n\r\n  private renderEmoji(html: string): string {\r\n    if (typeof joypixels === 'undefined' || typeof joypixels.shortnameToUnicode === 'undefined') {\r\n      throw new Error(errorJoyPixelsNotLoaded);\r\n    }\r\n    return joypixels.shortnameToUnicode(html);\r\n  }\r\n\r\n  private trimIndentation(markdown: string): string {\r\n    if (!markdown) {\r\n      return '';\r\n    }\r\n    let indentStart: number;\r\n    return markdown\r\n      .split('\\n')\r\n      .map(line => {\r\n        let lineIdentStart = indentStart;\r\n        if (line.length > 0) {\r\n          lineIdentStart = isNaN(lineIdentStart)\r\n            ? line.search(/\\S|$/)\r\n            : Math.min(line.search(/\\S|$/), lineIdentStart);\r\n        }\r\n        if (isNaN(indentStart)) {\r\n          indentStart = lineIdentStart;\r\n        }\r\n        return !!lineIdentStart\r\n          ? line.substring(lineIdentStart)\r\n          : line;\r\n      }).join('\\n');\r\n  }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnChanges, Output } from '@angular/core';\r\n\r\nimport { KatexOptions } from './katex-options';\r\nimport { MarkdownService } from './markdown.service';\r\nimport { PrismPlugin } from './prism-plugin';\r\n\r\n@Component({\r\n  // tslint:disable-next-line:component-selector\r\n  selector: 'markdown, [markdown]',\r\n  template: '<ng-content></ng-content>',\r\n})\r\nexport class MarkdownComponent implements OnChanges, AfterViewInit {\r\n\r\n  protected static ngAcceptInputType_emoji: boolean | '';\r\n  protected static ngAcceptInputType_katex: boolean | '';\r\n  protected static ngAcceptInputType_lineHighlight: boolean | '';\r\n  protected static ngAcceptInputType_lineNumbers: boolean | '';\r\n\r\n  @Input() data: string | undefined;\r\n  @Input() src: string | undefined;\r\n\r\n  // Plugin - emoji\r\n  @Input()\r\n  get emoji(): boolean { return this._emoji; }\r\n  set emoji(value: boolean) { this._emoji = this.coerceBooleanProperty(value); }\r\n\r\n  // Plugin - katex\r\n  @Input()\r\n  get katex(): boolean { return this._katex; }\r\n  set katex(value: boolean) { this._katex = this.coerceBooleanProperty(value); }\r\n  @Input() katexOptions: KatexOptions | undefined;\r\n\r\n  // Plugin - lineHighlight\r\n  @Input()\r\n  get lineHighlight(): boolean { return this._lineHighlight; }\r\n  set lineHighlight(value: boolean) { this._lineHighlight = this.coerceBooleanProperty(value); }\r\n  @Input() line: string | string[] | undefined;\r\n  @Input() lineOffset: number | undefined;\r\n\r\n  // Plugin - lineNumbers\r\n  @Input()\r\n  get lineNumbers(): boolean { return this._lineNumbers; }\r\n  set lineNumbers(value: boolean) { this._lineNumbers = this.coerceBooleanProperty(value); }\r\n  @Input() start: number | undefined;\r\n\r\n  // Event emitters\r\n  @Output() error = new EventEmitter<string>();\r\n  @Output() load = new EventEmitter<string>();\r\n  @Output() ready = new EventEmitter<void>();\r\n\r\n  private _emoji = false;\r\n  private _katex = false;\r\n  private _lineHighlight = false;\r\n  private _lineNumbers = false;\r\n\r\n  constructor(\r\n    public element: ElementRef<HTMLElement>,\r\n    public markdownService: MarkdownService,\r\n  ) { }\r\n\r\n  ngOnChanges(): void {\r\n    if (this.data != null) {\r\n      this.handleData();\r\n      return;\r\n    }\r\n    if (this.src != null) {\r\n      this.handleSrc();\r\n      return;\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (!this.data && !this.src) {\r\n      this.handleTransclusion();\r\n    }\r\n  }\r\n\r\n  render(markdown: string, decodeHtml = false): void {\r\n    let compiled = this.markdownService.compile(markdown, decodeHtml, this.emoji);\r\n    compiled = this.katex ? this.markdownService.renderKatex(compiled, this.katexOptions) : compiled;\r\n    this.element.nativeElement.innerHTML = compiled;\r\n    this.handlePlugins();\r\n    this.markdownService.highlight(this.element.nativeElement);\r\n    this.ready.emit();\r\n  }\r\n\r\n  private coerceBooleanProperty(value: boolean | ''): boolean {\r\n    return value != null && `${value}` !== 'false';\r\n  }\r\n\r\n  private handleData(): void {\r\n    this.render(this.data!);\r\n  }\r\n\r\n  private handleSrc(): void {\r\n    this.markdownService\r\n      .getSource(this.src!)\r\n      .subscribe(\r\n        markdown => {\r\n          this.render(markdown);\r\n          this.load.emit(markdown);\r\n        },\r\n        error => this.error.emit(error),\r\n      );\r\n  }\r\n\r\n  private handleTransclusion(): void {\r\n    this.render(this.element.nativeElement.innerHTML, true);\r\n  }\r\n\r\n  private handlePlugins(): void {\r\n    if (this.lineHighlight) {\r\n      this.setPluginClass(this.element.nativeElement, PrismPlugin.LineHighlight);\r\n      this.setPluginOptions(this.element.nativeElement, { dataLine: this.line, dataLineOffset: this.lineOffset });\r\n    }\r\n    if (this.lineNumbers) {\r\n      this.setPluginClass(this.element.nativeElement, PrismPlugin.LineNumbers);\r\n      this.setPluginOptions(this.element.nativeElement, { dataStart: this.start });\r\n    }\r\n  }\r\n\r\n  private setPluginClass(element: HTMLElement, plugin: string | string[]): void {\r\n    const preElements = element.querySelectorAll('pre');\r\n    for (let i = 0; i < preElements.length; i++) {\r\n      const classes = plugin instanceof Array ? plugin : [plugin];\r\n      preElements.item(i).classList.add(...classes);\r\n    }\r\n  }\r\n\r\n  private setPluginOptions(element: HTMLElement, options: { [key: string]: any }): void {\r\n    const preElements = element.querySelectorAll('pre');\r\n    for (let i = 0; i < preElements.length; i++) {\r\n      Object.keys(options).forEach(option => {\r\n        const attributeValue = options[option];\r\n        if (!!attributeValue) {\r\n          const attributeName = this.toLispCase(option);\r\n          preElements.item(i).setAttribute(attributeName, attributeValue.toString());\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private toLispCase(value: string): string {\r\n    const upperChars = value.match(/([A-Z])/g);\r\n    if (!upperChars) {\r\n      return value;\r\n    }\r\n    let str = value.toString();\r\n    for (let i = 0, n = upperChars.length; i < n; i++) {\r\n      str = str.replace(new RegExp(upperChars[i]), '-' + upperChars[i].toLowerCase());\r\n    }\r\n    if (str.slice(0, 1) === '-') {\r\n      str = str.slice(1);\r\n    }\r\n    return str;\r\n  }\r\n}\r\n","import { ElementRef, NgZone, Pipe, PipeTransform } from '@angular/core';\r\nimport { first } from 'rxjs/operators';\r\n\r\nimport { MarkdownService } from './markdown.service';\r\n\r\n@Pipe({\r\n  name: 'markdown',\r\n})\r\nexport class MarkdownPipe implements PipeTransform {\r\n\r\n  constructor(\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    private markdownService: MarkdownService,\r\n    private zone: NgZone,\r\n  ) { }\r\n\r\n  transform(value: string): string {\r\n    if (value == null) {\r\n      return '';\r\n    }\r\n\r\n    if (typeof value !== 'string') {\r\n      console.error(`MarkdownPipe has been invoked with an invalid value type [${value}]`);\r\n      return value;\r\n    }\r\n\r\n    const markdown = this.markdownService.compile(value);\r\n\r\n    this.zone.onStable\r\n      .pipe(first())\r\n      .subscribe(() => this.markdownService.highlight(this.elementRef.nativeElement));\r\n\r\n    return markdown;\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule, Provider, SecurityContext } from '@angular/core';\r\n\r\nimport { LanguagePipe } from './language.pipe';\r\nimport { MarkdownComponent } from './markdown.component';\r\nimport { MarkdownPipe } from './markdown.pipe';\r\nimport { MarkdownService, SECURITY_CONTEXT } from './markdown.service';\r\n\r\n// having a dependency on `HttpClientModule` within a library\r\n// breaks all the interceptors from the app consuming the library\r\n// here, we explicitely ask the user to pass a provider with\r\n// their own instance of `HttpClientModule`\r\nexport interface MarkdownModuleConfig {\r\n  loader?: Provider;\r\n  markedOptions?: Provider;\r\n  sanitize?: SecurityContext;\r\n}\r\n\r\nconst sharedDeclarations = [\r\n  LanguagePipe,\r\n  MarkdownComponent,\r\n  MarkdownPipe,\r\n];\r\n\r\n@NgModule({\r\n  exports: sharedDeclarations,\r\n  declarations: sharedDeclarations,\r\n})\r\nexport class MarkdownModule {\r\n  static forRoot(markdownModuleConfig?: MarkdownModuleConfig): ModuleWithProviders<MarkdownModule> {\r\n    return {\r\n      ngModule: MarkdownModule,\r\n      providers: [\r\n        MarkdownService,\r\n        markdownModuleConfig && markdownModuleConfig.loader || [],\r\n        markdownModuleConfig && markdownModuleConfig.markedOptions || [],\r\n        {\r\n          provide: SECURITY_CONTEXT,\r\n          useValue: markdownModuleConfig && markdownModuleConfig.sanitize != null\r\n            ? markdownModuleConfig.sanitize\r\n            : SecurityContext.HTML,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  static forChild(): ModuleWithProviders<MarkdownModule> {\r\n    return {\r\n      ngModule: MarkdownModule,\r\n    };\r\n  }\r\n}\r\n"]}