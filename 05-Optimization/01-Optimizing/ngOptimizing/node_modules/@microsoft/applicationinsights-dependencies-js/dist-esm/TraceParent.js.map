{"version":3,"file":"TraceParent.js","sourceRoot":"","sources":["../src/TraceParent.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,uCAAuC,CAAC;AAE7D;IAgBI,qBAAY,OAAgB,EAAE,MAAe;QAJtC,cAAS,GAAW,WAAW,CAAC,kBAAkB,CAAC;QAEnD,YAAO,GAAW,WAAW,CAAC,eAAe,CAAC;QAGjD,EAAE,CAAC,CAAC,OAAO,IAAI,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACjD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAC3B,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACxC,CAAC;QACD,EAAE,CAAC,CAAC,MAAM,IAAI,WAAW,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACzB,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACrD,CAAC;IACL,CAAC;IAzBa,0BAAc,GAA5B,UAA6B,EAAU;QACnC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,gBAAgB,CAAC,IAAI,EAAE,KAAK,kCAAkC,CAAC;IACnF,CAAC;IAEa,yBAAa,GAA3B,UAA4B,EAAU;QAClC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,gBAAgB,CAAC,IAAI,EAAE,KAAK,kBAAkB,CAAC;IACnE,CAAC;IAqBM,8BAAQ,GAAf;QACI,MAAM,CAAI,IAAI,CAAC,OAAO,SAAI,IAAI,CAAC,OAAO,SAAI,IAAI,CAAC,MAAM,SAAI,IAAI,CAAC,SAAW,CAAC;IAC9E,CAAC;IAtBc,8BAAkB,GAAG,IAAI,CAAC;IAC1B,2BAAe,GAAG,IAAI,CAAC;IAsB1C,kBAAC;CAAA,AAhCD,IAgCC;SAhCY,WAAW","sourcesContent":["import { Util } from '@microsoft/applicationinsights-common';\r\n\r\nexport class Traceparent {\r\n\r\n    public static isValidTraceId(id: string): boolean {\r\n        return id.match(/^[0-9a-f]{32}$/) && id !== \"00000000000000000000000000000000\";\r\n    }\r\n\r\n    public static isValidSpanId(id: string): boolean {\r\n        return id.match(/^[0-9a-f]{16}$/) && id !== \"0000000000000000\";\r\n    }\r\n    private static DEFAULT_TRACE_FLAG = \"01\";\r\n    private static DEFAULT_VERSION = \"00\";\r\n    public spanId: string;\r\n    public traceFlag: string = Traceparent.DEFAULT_TRACE_FLAG;\r\n    public traceId: string;\r\n    public version: string = Traceparent.DEFAULT_VERSION;\r\n\r\n    constructor(traceId?: string, spanId?: string) {\r\n        if (traceId && Traceparent.isValidTraceId(traceId)) {\r\n            this.traceId = traceId;\r\n        } else {\r\n            this.traceId = Util.generateW3CId();\r\n        }\r\n        if (spanId && Traceparent.isValidSpanId(spanId)) {\r\n            this.spanId = spanId;\r\n        } else {\r\n            this.spanId = Util.generateW3CId().substr(0, 16);\r\n        }\r\n    }\r\n\r\n    public toString(): string {\r\n        return `${this.version}-${this.traceId}-${this.spanId}-${this.traceFlag}`;\r\n    }\r\n}"]}