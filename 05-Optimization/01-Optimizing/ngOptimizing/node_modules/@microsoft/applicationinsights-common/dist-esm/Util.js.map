{"version":3,"file":"Util.js","sourceRoot":"","sources":["../src/Util.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport { StorageType } from \"./Enums\";\r\nimport { CoreUtils, _InternalMessageId, LoggingSeverity, IDiagnosticLogger, IPlugin } from \"@microsoft/applicationinsights-core-js\";\r\nimport { IConfig } from \"./Interfaces/IConfig\";\r\nimport { RequestHeaders } from \"./RequestResponseHeaders\";\r\nimport { DataSanitizer } from \"./Telemetry/Common/DataSanitizer\";\r\nimport { ICorrelationConfig } from \"./Interfaces/ICorrelationConfig\";\r\n\r\nexport class Util {\r\n    private static document: any = typeof document !== \"undefined\" ? document : {};\r\n    private static _canUseLocalStorage: boolean = undefined;\r\n    private static _canUseSessionStorage: boolean = undefined;\r\n    // listing only non-geo specific locations\r\n    private static _internalEndpoints: string[] = [\r\n        \"https://dc.services.visualstudio.com/v2/track\",\r\n        \"https://breeze.aimon.applicationinsights.io/v2/track\",\r\n        \"https://dc-int.services.visualstudio.com/v2/track\"\r\n    ];\r\n    public static NotSpecified = \"not_specified\";\r\n\r\n    public static createDomEvent(eventName: string): Event {\r\n        let event: Event = null;\r\n\r\n        if (typeof Event === \"function\") { // Use Event constructor when available\r\n            event = new Event(eventName);\r\n        } else { // Event has no constructor in IE\r\n            event = document.createEvent(\"Event\");\r\n            event.initEvent(eventName, true, true);\r\n        }\r\n\r\n        return event;\r\n    }\r\n\r\n    /*\r\n     * Force the SDK not to use local and session storage\r\n    */\r\n    public static disableStorage() {\r\n        Util._canUseLocalStorage = false;\r\n        Util._canUseSessionStorage = false;\r\n    }\r\n\r\n    /**\r\n     * Gets the localStorage object if available\r\n     * @return {Storage} - Returns the storage object if available else returns null\r\n     */\r\n    private static _getLocalStorageObject(): Storage {\r\n        if (Util.canUseLocalStorage()) {\r\n            return Util._getVerifiedStorageObject(StorageType.LocalStorage);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Tests storage object (localStorage or sessionStorage) to verify that it is usable\r\n     * More details here: https://mathiasbynens.be/notes/localstorage-pattern\r\n     * @param storageType Type of storage\r\n     * @return {Storage} Returns storage object verified that it is usable\r\n     */\r\n    private static _getVerifiedStorageObject(storageType: StorageType): Storage {\r\n        let storage: Storage = null;\r\n        let fail: boolean;\r\n        let uid: Date;\r\n        try {\r\n            if (typeof window === 'undefined') {\r\n                return null;\r\n            }\r\n            uid = new Date;\r\n            storage = storageType === StorageType.LocalStorage ? window.localStorage : window.sessionStorage;\r\n            storage.setItem(uid.toString(), uid.toString());\r\n            fail = storage.getItem(uid.toString()) !== uid.toString();\r\n            storage.removeItem(uid.toString());\r\n            if (fail) {\r\n                storage = null;\r\n            }\r\n        } catch (exception) {\r\n            storage = null;\r\n        }\r\n\r\n        return storage;\r\n    }\r\n\r\n    /**\r\n     *  Checks if endpoint URL is application insights internal injestion service URL.\r\n     *\r\n     *  @param endpointUrl Endpoint URL to check.\r\n     *  @returns {boolean} True if if endpoint URL is application insights internal injestion service URL.\r\n     */\r\n    public static isInternalApplicationInsightsEndpoint(endpointUrl: string): boolean {\r\n        return Util._internalEndpoints.indexOf(endpointUrl.toLowerCase()) !== -1;\r\n    }\r\n\r\n    /**\r\n     *  Check if the browser supports local storage.\r\n     *\r\n     *  @returns {boolean} True if local storage is supported.\r\n     */\r\n    public static canUseLocalStorage(): boolean {\r\n        if (Util._canUseLocalStorage === undefined) {\r\n            Util._canUseLocalStorage = !!Util._getVerifiedStorageObject(StorageType.LocalStorage);\r\n        }\r\n\r\n        return Util._canUseLocalStorage;\r\n    }\r\n\r\n    /**\r\n     *  Get an object from the browser's local storage\r\n     *\r\n     *  @param {string} name - the name of the object to get from storage\r\n     *  @returns {string} The contents of the storage object with the given name. Null if storage is not supported.\r\n     */\r\n    public static getStorage(logger: IDiagnosticLogger, name: string): string {\r\n        const storage = Util._getLocalStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                return storage.getItem(name);\r\n            } catch (e) {\r\n                Util._canUseLocalStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserCannotReadLocalStorage,\r\n                    \"Browser failed read of local storage. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     *  Set the contents of an object in the browser's local storage\r\n     *\r\n     *  @param {string} name - the name of the object to set in storage\r\n     *  @param {string} data - the contents of the object to set in storage\r\n     *  @returns {boolean} True if the storage object could be written.\r\n     */\r\n    public static setStorage(logger: IDiagnosticLogger, name: string, data: string): boolean {\r\n        const storage = Util._getLocalStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                storage.setItem(name, data);\r\n                return true;\r\n            } catch (e) {\r\n                Util._canUseLocalStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserCannotWriteLocalStorage,\r\n                    \"Browser failed write to local storage. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     *  Remove an object from the browser's local storage\r\n     *\r\n     *  @param {string} name - the name of the object to remove from storage\r\n     *  @returns {boolean} True if the storage object could be removed.\r\n     */\r\n    public static removeStorage(logger: IDiagnosticLogger, name: string): boolean {\r\n        const storage = Util._getLocalStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                storage.removeItem(name);\r\n                return true;\r\n            } catch (e) {\r\n                Util._canUseLocalStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserFailedRemovalFromLocalStorage,\r\n                    \"Browser failed removal of local storage item. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Gets the sessionStorage object if available\r\n     * @return {Storage} - Returns the storage object if available else returns null\r\n     */\r\n    private static _getSessionStorageObject(): Storage {\r\n        if (Util.canUseSessionStorage()) {\r\n            return Util._getVerifiedStorageObject(StorageType.SessionStorage);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     *  Check if the browser supports session storage.\r\n     *\r\n     *  @returns {boolean} True if session storage is supported.\r\n     */\r\n    public static canUseSessionStorage(): boolean {\r\n        if (Util._canUseSessionStorage === undefined) {\r\n            Util._canUseSessionStorage = !!Util._getVerifiedStorageObject(StorageType.SessionStorage);\r\n        }\r\n\r\n        return Util._canUseSessionStorage;\r\n    }\r\n\r\n    /**\r\n     *  Gets the list of session storage keys\r\n     *\r\n     *  @returns {string[]} List of session storage keys\r\n     */\r\n    public static getSessionStorageKeys(): string[] {\r\n        const keys = [];\r\n\r\n        if (Util.canUseSessionStorage()) {\r\n            for (const key in window.sessionStorage) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n        return keys;\r\n    }\r\n\r\n    /**\r\n     *  Get an object from the browser's session storage\r\n     *\r\n     *  @param {string} name - the name of the object to get from storage\r\n     *  @returns {string} The contents of the storage object with the given name. Null if storage is not supported.\r\n     */\r\n    public static getSessionStorage(logger: IDiagnosticLogger, name: string): string {\r\n        const storage = Util._getSessionStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                return storage.getItem(name);\r\n            } catch (e) {\r\n                Util._canUseSessionStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserCannotReadSessionStorage,\r\n                    \"Browser failed read of session storage. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     *  Set the contents of an object in the browser's session storage\r\n     *\r\n     *  @param {string} name - the name of the object to set in storage\r\n     *  @param {string} data - the contents of the object to set in storage\r\n     *  @returns {boolean} True if the storage object could be written.\r\n     */\r\n    public static setSessionStorage(logger: IDiagnosticLogger, name: string, data: string): boolean {\r\n        const storage = Util._getSessionStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                storage.setItem(name, data);\r\n                return true;\r\n            } catch (e) {\r\n                Util._canUseSessionStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserCannotWriteSessionStorage,\r\n                    \"Browser failed write to session storage. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     *  Remove an object from the browser's session storage\r\n     *\r\n     *  @param {string} name - the name of the object to remove from storage\r\n     *  @returns {boolean} True if the storage object could be removed.\r\n     */\r\n    public static removeSessionStorage(logger: IDiagnosticLogger, name: string): boolean {\r\n        const storage = Util._getSessionStorageObject();\r\n        if (storage !== null) {\r\n            try {\r\n                storage.removeItem(name);\r\n                return true;\r\n            } catch (e) {\r\n                Util._canUseSessionStorage = false;\r\n\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.BrowserFailedRemovalFromSessionStorage,\r\n                    \"Browser failed removal of session storage item. \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /*\r\n     * Force the SDK not to store and read any data from cookies\r\n     */\r\n    public static disableCookies() {\r\n        CoreUtils.disableCookies();\r\n    }\r\n\r\n    /*\r\n     * helper method to tell if document.cookie object is available\r\n     */\r\n    public static canUseCookies(logger: IDiagnosticLogger): any {\r\n        if (CoreUtils._canUseCookies === undefined) {\r\n            CoreUtils._canUseCookies = false;\r\n\r\n            try {\r\n                CoreUtils._canUseCookies = Util.document.cookie !== undefined;\r\n            } catch (e) {\r\n                logger.throwInternal(\r\n                    LoggingSeverity.WARNING,\r\n                    _InternalMessageId.CannotAccessCookie,\r\n                    \"Cannot access document.cookie - \" + Util.getExceptionName(e),\r\n                    { exception: Util.dump(e) });\r\n            };\r\n        }\r\n\r\n        return CoreUtils._canUseCookies;\r\n    }\r\n\r\n    /**\r\n     * helper method to set userId and sessionId cookie\r\n     */\r\n    public static setCookie(logger: IDiagnosticLogger, name, value, domain?) {\r\n        let domainAttrib = \"\";\r\n        let secureAttrib = \"\";\r\n\r\n        if (domain) {\r\n            domainAttrib = \";domain=\" + domain;\r\n        }\r\n\r\n        if (Util.document.location && Util.document.location.protocol === \"https:\") {\r\n            secureAttrib = \";secure\";\r\n        }\r\n\r\n        if (Util.canUseCookies(logger)) {\r\n            Util.document.cookie = name + \"=\" + value + domainAttrib + \";path=/\" + secureAttrib;\r\n        }\r\n    }\r\n\r\n    public static stringToBoolOrDefault(str: any, defaultValue = false): boolean {\r\n        if (str === undefined || str === null) {\r\n            return defaultValue;\r\n        }\r\n\r\n        return str.toString().toLowerCase() === \"true\";\r\n    }\r\n\r\n    /**\r\n     * helper method to access userId and sessionId cookie\r\n     */\r\n    public static getCookie(logger: IDiagnosticLogger, name) {\r\n        if (!Util.canUseCookies(logger)) {\r\n            return;\r\n        }\r\n\r\n        let value = \"\";\r\n        if (name && name.length) {\r\n            const cookieName = name + \"=\";\r\n            const cookies = Util.document.cookie.split(\";\");\r\n            for (let i = 0; i < cookies.length; i++) {\r\n                let cookie = cookies[i];\r\n                cookie = Util.trim(cookie);\r\n                if (cookie && cookie.indexOf(cookieName) === 0) {\r\n                    value = cookie.substring(cookieName.length, cookies[i].length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Deletes a cookie by setting it's expiration time in the past.\r\n     * @param name - The name of the cookie to delete.\r\n     */\r\n    public static deleteCookie(logger: IDiagnosticLogger, name: string) {\r\n        if (Util.canUseCookies(logger)) {\r\n            // Setting the expiration date in the past immediately removes the cookie\r\n            Util.document.cookie = name + \"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n     */\r\n    public static trim(str: any): string {\r\n        if (typeof str !== \"string\") { return str; }\r\n        return str.replace(/^\\s+|\\s+$/g, \"\");\r\n    }\r\n\r\n    /**\r\n     * generate random id string\r\n     */\r\n    public static newId(): string {\r\n        const base64chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n        let result = \"\";\r\n        // tslint:disable-next-line:insecure-random\r\n        let random = Math.random() * 1073741824; // 5 symbols in base64, almost maxint\r\n\r\n        while (random > 0) {\r\n            const char = base64chars.charAt(random % 64);\r\n            result += char;\r\n            random = Math.floor(random / 64);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\r\n     */\r\n    public static random32() {\r\n        return (0x100000000 * Math.random()) | 0;\r\n    }\r\n\r\n    /**\r\n     * generate W3C trace id\r\n     */\r\n    public static generateW3CId() {\r\n        const hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n\r\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n        let oct = \"\", tmp;\r\n        for (let a = 0; a < 4; a++) {\r\n            tmp = Util.random32();\r\n            oct +=\r\n                hexValues[tmp & 0xF] +\r\n                hexValues[tmp >> 4 & 0xF] +\r\n                hexValues[tmp >> 8 & 0xF] +\r\n                hexValues[tmp >> 12 & 0xF] +\r\n                hexValues[tmp >> 16 & 0xF] +\r\n                hexValues[tmp >> 20 & 0xF] +\r\n                hexValues[tmp >> 24 & 0xF] +\r\n                hexValues[tmp >> 28 & 0xF];\r\n        }\r\n\r\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n        const clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\r\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\r\n    }\r\n\r\n    /**\r\n     * Check if an object is of type Array\r\n     */\r\n    public static isArray(obj: any): boolean {\r\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n    }\r\n\r\n    /**\r\n     * Check if an object is of type Error\r\n     */\r\n    public static isError(obj: any): boolean {\r\n        return Object.prototype.toString.call(obj) === \"[object Error]\";\r\n    }\r\n\r\n    /**\r\n     * Check if an object is of type Date\r\n     */\r\n    public static isDate(obj: any): boolean {\r\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\r\n    }\r\n\r\n    /**\r\n     * Convert a date to I.S.O. format in IE8\r\n     */\r\n    public static toISOStringForIE8(date: Date) {\r\n        if (Util.isDate(date)) {\r\n            if (Date.prototype.toISOString) {\r\n                return date.toISOString();\r\n            } else {\r\n                const pad = (num: number) => {\r\n                    let r = String(num);\r\n                    if (r.length === 1) {\r\n                        r = \"0\" + r;\r\n                    }\r\n\r\n                    return r;\r\n                }\r\n\r\n                return date.getUTCFullYear()\r\n                    + \"-\" + pad(date.getUTCMonth() + 1)\r\n                    + \"-\" + pad(date.getUTCDate())\r\n                    + \"T\" + pad(date.getUTCHours())\r\n                    + \":\" + pad(date.getUTCMinutes())\r\n                    + \":\" + pad(date.getUTCSeconds())\r\n                    + \".\" + String((date.getUTCMilliseconds() / 1000).toFixed(3)).slice(2, 5)\r\n                    + \"Z\";\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets IE version if we are running on IE, or null otherwise\r\n     */\r\n    public static getIEVersion(userAgentStr: string = null): number {\r\n        const myNav = userAgentStr ? userAgentStr.toLowerCase() : navigator.userAgent.toLowerCase();\r\n        return (myNav.indexOf('msie') !== -1) ? parseInt(myNav.split('msie')[1]) : null;\r\n    }\r\n\r\n    /**\r\n     * Convert ms to c# time span format\r\n     */\r\n    public static msToTimeSpan(totalms: number): string {\r\n        if (isNaN(totalms) || totalms < 0) {\r\n            totalms = 0;\r\n        }\r\n\r\n        totalms = Math.round(totalms);\r\n\r\n        let ms = \"\" + totalms % 1000;\r\n        let sec = \"\" + Math.floor(totalms / 1000) % 60;\r\n        let min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\r\n        let hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n        const days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n\r\n        ms = ms.length === 1 ? \"00\" + ms : ms.length === 2 ? \"0\" + ms : ms;\r\n        sec = sec.length < 2 ? \"0\" + sec : sec;\r\n        min = min.length < 2 ? \"0\" + min : min;\r\n        hour = hour.length < 2 ? \"0\" + hour : hour;\r\n\r\n        return (days > 0 ? days + \".\" : \"\") + hour + \":\" + min + \":\" + sec + \".\" + ms;\r\n    }\r\n\r\n    /**\r\n     * Checks if error has no meaningful data inside. Ususally such errors are received by window.onerror when error\r\n     * happens in a script from other domain (cross origin, CORS).\r\n     */\r\n    public static isCrossOriginError(message: string, url: string, lineNumber: number, columnNumber: number, error: Error): boolean {\r\n        return (message === \"Script error.\" || message === \"Script error\") && !error;\r\n    }\r\n\r\n    /**\r\n     * Returns string representation of an object suitable for diagnostics logging.\r\n     */\r\n    public static dump(object: any): string {\r\n        const objectTypeDump: string = Object.prototype.toString.call(object);\r\n        let propertyValueDump: string = JSON.stringify(object);\r\n        if (objectTypeDump === \"[object Error]\") {\r\n            propertyValueDump = \"{ stack: '\" + object.stack + \"', message: '\" + object.message + \"', name: '\" + object.name + \"'\";\r\n        }\r\n\r\n        return objectTypeDump + propertyValueDump;\r\n    }\r\n\r\n    /**\r\n     * Returns the name of object if it's an Error. Otherwise, returns empty string.\r\n     */\r\n    public static getExceptionName(object: any): string {\r\n        const objectTypeDump: string = Object.prototype.toString.call(object);\r\n        if (objectTypeDump === \"[object Error]\") {\r\n            return object.name;\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    /**\r\n     * Adds an event handler for the specified event\r\n     * @param eventName {string} - The name of the event\r\n     * @param callback {any} - The callback function that needs to be executed for the given event\r\n     * @return {boolean} - true if the handler was successfully added\r\n     */\r\n    public static addEventHandler(eventName: string, callback: any): boolean {\r\n        if (typeof window === 'undefined' || !window || typeof eventName !== 'string' || typeof callback !== 'function') {\r\n            return false;\r\n        }\r\n\r\n        // Create verb for the event\r\n        const verbEventName = 'on' + eventName;\r\n\r\n        // check if addEventListener is available\r\n        if (window.addEventListener) {\r\n            window.addEventListener(eventName, callback, false);\r\n        } else if (window[\"attachEvent\"]) { // For older browsers\r\n            window[\"attachEvent\"](verbEventName, callback);\r\n        } else { // if all else fails\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Tells if a browser supports a Beacon API\r\n     */\r\n    public static IsBeaconApiSupported(): boolean {\r\n        return ('sendBeacon' in navigator && (navigator as any).sendBeacon);\r\n    }\r\n\r\n    public static getExtension(extensions: IPlugin[], identifier: string) {\r\n        let extension = null;\r\n        let extIx = 0;\r\n\r\n        while (!extension && extIx < extensions.length) {\r\n            if (extensions[extIx] && extensions[extIx].identifier === identifier) {\r\n                extension = extensions[extIx];\r\n            }\r\n            extIx++;\r\n        }\r\n\r\n        return extension;\r\n    }\r\n}\r\n\r\nexport class UrlHelper {\r\n    private static document: any = typeof document !== \"undefined\" ? document : {};\r\n    private static htmlAnchorElement: HTMLAnchorElement;\r\n\r\n    public static parseUrl(url): HTMLAnchorElement {\r\n        if (!UrlHelper.htmlAnchorElement) {\r\n            UrlHelper.htmlAnchorElement = !!UrlHelper.document.createElement ? UrlHelper.document.createElement('a') : { host: UrlHelper.parseHost(url) }; // fill host field in the fallback case as that is the only externally required field from this fn\r\n        }\r\n\r\n        UrlHelper.htmlAnchorElement.href = url;\r\n\r\n        return UrlHelper.htmlAnchorElement;\r\n    }\r\n\r\n    public static getAbsoluteUrl(url): string {\r\n        let result: string;\r\n        const a = UrlHelper.parseUrl(url);\r\n        if (a) {\r\n            result = a.href;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public static getPathName(url): string {\r\n        let result: string;\r\n        const a = UrlHelper.parseUrl(url);\r\n        if (a) {\r\n            result = a.pathname;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public static getCompleteUrl(method: string, absoluteUrl: string) {\r\n        if (method) {\r\n            return method.toUpperCase() + \" \" + absoluteUrl;\r\n        } else {\r\n            return absoluteUrl;\r\n        }\r\n    }\r\n\r\n    // Fallback method to grab host from url if document.createElement method is not available\r\n    public static parseHost(url: string) {\r\n        const match = url.match(/:\\/\\/(www[0-9]?\\.)?(.[^/:]+)/i);\r\n        if (match != null && match.length > 2 && typeof match[2] === 'string' && match[2].length > 0) {\r\n            return match[2];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport class CorrelationIdHelper {\r\n    public static correlationIdPrefix = \"cid-v1:\";\r\n\r\n    /**\r\n     * Checks if a request url is not on a excluded domain list and if it is safe to add correlation headers\r\n     */\r\n    public static canIncludeCorrelationHeader(config: ICorrelationConfig, requestUrl: string, currentHost: string) {\r\n        if (config && config.disableCorrelationHeaders) {\r\n            return false;\r\n        }\r\n\r\n        if (!requestUrl) {\r\n            return false;\r\n        }\r\n\r\n        const requestHost = UrlHelper.parseUrl(requestUrl).host.toLowerCase();\r\n        if ((!config || !config.enableCorsCorrelation) && requestHost !== currentHost) {\r\n            return false;\r\n        }\r\n\r\n        const includedDomains = config && config.correlationHeaderDomains;\r\n        if (includedDomains) {\r\n            let matchExists;\r\n            includedDomains.forEach((domain) => {\r\n                const regex = new RegExp(domain.toLowerCase().replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n                matchExists = matchExists || regex.test(requestHost);\r\n            });\r\n\r\n            if (!matchExists) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        const excludedDomains = config && config.correlationHeaderExcludedDomains;\r\n        if (!excludedDomains || excludedDomains.length === 0) {\r\n            return true;\r\n        }\r\n\r\n        for (let i = 0; i < excludedDomains.length; i++) {\r\n            const regex = new RegExp(excludedDomains[i].toLowerCase().replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n            if (regex.test(requestHost)) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Combines target appId and target role name from response header.\r\n     */\r\n    public static getCorrelationContext(responseHeader: string) {\r\n        if (responseHeader) {\r\n            const correlationId = CorrelationIdHelper.getCorrelationContextValue(responseHeader, RequestHeaders.requestContextTargetKey);\r\n            if (correlationId && correlationId !== CorrelationIdHelper.correlationIdPrefix) {\r\n                return correlationId;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets key from correlation response header\r\n     */\r\n    public static getCorrelationContextValue(responseHeader: string, key: string) {\r\n        if (responseHeader) {\r\n            const keyValues = responseHeader.split(\",\");\r\n            for (let i = 0; i < keyValues.length; ++i) {\r\n                const keyValue = keyValues[i].split(\"=\");\r\n                if (keyValue.length === 2 && keyValue[0] === key) {\r\n                    return keyValue[1];\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport class AjaxHelper {\r\n    public static ParseDependencyPath(logger: IDiagnosticLogger, absoluteUrl: string, method: string, commandName: string) {\r\n        let target, name = commandName, data = commandName;\r\n\r\n        if (absoluteUrl && absoluteUrl.length > 0) {\r\n            const parsedUrl: HTMLAnchorElement = UrlHelper.parseUrl(absoluteUrl)\r\n            target = parsedUrl.host;\r\n            if (!name) {\r\n                if (parsedUrl.pathname != null) {\r\n                    let pathName: string = (parsedUrl.pathname.length === 0) ? \"/\" : parsedUrl.pathname;\r\n                    if (pathName.charAt(0) !== '/') {\r\n                        pathName = \"/\" + pathName;\r\n                    }\r\n                    data = parsedUrl.pathname;\r\n                    name = DataSanitizer.sanitizeString(logger, method ? method + \" \" + pathName : pathName);\r\n                } else {\r\n                    name = DataSanitizer.sanitizeString(logger, absoluteUrl);\r\n                }\r\n            }\r\n        } else {\r\n            target = commandName;\r\n            name = commandName;\r\n        }\r\n\r\n        return {\r\n            target,\r\n            name,\r\n            data\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n * A utility class that helps getting time related parameters\r\n */\r\nexport class DateTimeUtils {\r\n    /**\r\n     * Get the number of milliseconds since 1970/01/01 in local timezone\r\n     */\r\n    public static Now = (typeof window === 'undefined') ? () => new Date().getTime() :\r\n        (window.performance && window.performance.now && window.performance.timing) ?\r\n            () => {\r\n                return window.performance.now() + window.performance.timing.navigationStart;\r\n            }\r\n            :\r\n            () => {\r\n                return new Date().getTime();\r\n            }\r\n\r\n    /**\r\n     * Gets duration between two timestamps\r\n     */\r\n    public static GetDuration = (start: number, end: number): number => {\r\n        let result = null;\r\n        if (start !== 0 && end !== 0 && !CoreUtils.isNullOrUndefined(start) && !CoreUtils.isNullOrUndefined(end)) {\r\n            result = end - start;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n"]}